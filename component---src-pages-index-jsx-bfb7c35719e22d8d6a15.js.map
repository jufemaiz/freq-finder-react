{"version":3,"sources":["webpack:///./src/components/Search/SearchForm.jsx","webpack:///./src/components/Search/SearchResult.jsx","webpack:///./src/pages/index.jsx"],"names":["SearchForm","props","_this","_Component","call","this","handleChange","bind","assertThisInitialized_default","e","onQueryChange","target","value","render","query","react_default","a","createElement","Form_default","Group","Label","srOnly","Control","type","placeholder","onChange","Component","SearchResult","_this$props$transmitt","transmitter","areaServed","antennaHeight","antennaPattern","band","bSL","callsign","distance","frequency","easting","id","hoursofOperation","purpose","latitude","licenceArea","licenceAreaID","licenceNumber","longitude","maximumCMF","maximumERP","northing","onAirID","polarisation","siteName","siteId","state","status","technicalSpecificationNumber","transmitterPower","zone","className","gatsby_browser_entry","to","toFixed","propTypes","PropTypes","isRequired","IndexPage","getInfo","latlng","lat","position","coords","lng","transmitterListingSorted","transmitterListing","map","t","geodist","exact","unit","sort","b","length","filter","match","RegExp","setState","results","slice","getLocation","geolocation","navigator","Promise","resolve","reject","Error","getCurrentPosition","then","handleQueryChange","componentDidMount","_this2","searchResults","key","Search_SearchResult","layout","Search_SearchForm"],"mappings":"6NAkCeA,cA7Bb,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OACjBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MAEKC,aAAeJ,EAAKI,aAAaC,KAAlBC,QAAAN,KAHHA,sCAMnBI,sBAAaG,GACXJ,KAAKJ,MAAMS,cAAcD,EAAEE,OAAOC,UAGpCC,kBAAS,IACDC,EAAUT,KAAKJ,MAAfa,MAEN,OACEC,EAAAC,EAAAC,cAACC,EAAAF,EAAD,KACED,EAAAC,EAAAC,cAACC,EAAAF,EAAKG,MAAN,KACEJ,EAAAC,EAAAC,cAACC,EAAAF,EAAKI,MAAN,CAAYC,QAAQ,GAApB,UACAN,EAAAC,EAAAC,cAACC,EAAAF,EAAKM,QAAN,CACEC,KAAK,OACLC,YAAY,iBACZZ,MAAOE,EACPW,SAAUpB,KAAKC,qBAtBFoB,6BCCnBC,4FAeJd,kBAAS,IAAAe,EA+BHvB,KAAKJ,MAAM4B,YA3BbC,GAJKF,EAELG,cAFKH,EAGLI,eAHKJ,EAILE,YAEAG,GANKL,EAKLM,IALKN,EAMLK,MACAE,EAPKP,EAOLO,SACAC,EARKR,EAQLQ,SAEAC,GAVKT,EASLU,QATKV,EAULS,WAEAE,GAZKX,EAWLY,iBAXKZ,EAYLW,IAWAE,GAvBKb,EAaLc,SAbKd,EAcLe,YAdKf,EAeLgB,cAfKhB,EAgBLiB,cAhBKjB,EAiBLkB,UAjBKlB,EAkBLmB,WAlBKnB,EAmBLoB,WAnBKpB,EAoBLqB,SApBKrB,EAqBLsB,QArBKtB,EAsBLuB,aAtBKvB,EAuBLa,SAEAW,GAzBKxB,EAwBLyB,OAxBKzB,EAyBLwB,UACAE,EA1BK1B,EA0BL0B,MA1BK1B,EA2BL2B,OA3BK3B,EA4BL4B,6BA5BK5B,EA6BL6B,iBA7BK7B,EA8BL8B,KAGF,OACE3C,EAAAC,EAAAC,cAAA,OAAK0C,UAAU,eACb5C,EAAAC,EAAAC,cAAC2C,EAAA,KAAD,CAAMC,GAAE,iBAAmBtB,GACzBxB,EAAAC,EAAAC,cAAA,UACGkB,EACA,IACAE,EACAJ,GAEHlB,EAAAC,EAAAC,cAAA,SACImC,EADJ,IAGG,IACCtB,EAJJ,IAMG,IACCwB,GAEJvC,EAAAC,EAAAC,cAAA,qBAEImB,EAAS0B,QAAQ,GAFrB,MAKA/C,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,QAAM0C,UAAU,uBAAwBlB,UAxEzBf,aAArBC,EACGoC,UAAY,CACjBlC,YAAamC,QAAgB,CAC3BjC,cAAeiC,SACflC,WAAYkC,SACZV,MAAOU,SACP/B,KAAM+B,SACN3B,UAAW2B,SACXd,QAASc,SACT7B,SAAU6B,SACVtB,SAAUsB,SACVlB,UAAWkB,WACVC,YAoEQtC,iBC5ETuC,cACJ,SAAAA,EAAYjE,GAAO,IAAAC,EAAA,OACjBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MAuBF8D,QAAU,WACR,IAAMC,EAAS,CACbC,IAAKnE,EAAKoD,MAAMgB,SAASC,OAAO7B,SAChC8B,IAAKtE,EAAKoD,MAAMgB,SAASC,OAAOzB,WAG9B2B,EAA2BC,EAAmBC,IAAI,SAACC,GAMrD,OALAA,EAAExC,SAAWyC,IACXT,EACA,CAAEC,IAAKO,EAAElC,SAAU8B,IAAKI,EAAE9B,WAC1B,CAAEgC,OAAO,EAAMC,KAAM,OAEhBH,IAETH,EAA2BA,EAAyBO,KAAK,SAAChE,EAAGiE,GAAJ,OAAUjE,EAAEoB,SAAW6C,EAAE7C,WAE9ElC,EAAKoD,MAAMxC,MAAMoE,OAAS,IAC5BT,EAA2BA,EAAyBU,OAAO,SAACP,GAC1D,OAAmB,OAAfA,EAAEzC,UAGyD,OAAxDyC,EAAEzC,SAASiD,MAAM,IAAIC,OAAOnF,EAAKoD,MAAMxC,MAAO,SAIzDZ,EAAKoF,SAAS,CAAEC,QAASd,EAAyBe,MAAM,EAAG,QAjD1CtF,EAoDnBuF,YAAc,WACZ,IAAMC,EAAcC,UAAUD,YAEb,IAAIE,QAAQ,SAACC,EAASC,GAChCJ,GACHI,EAAO,IAAIC,MAAM,kBAGnBL,EAAYM,mBAAmB,SAAC1B,GAC9BuB,EAAQvB,IACP,WACDwB,EAAO,IAAIC,MAAM,0BAIZE,KAAK,SAAC3B,GACbpE,EAAKoF,SAAS,CACZhB,YACC,WACDpE,EAAKiE,eApETjE,EAAKgG,kBAAoBhG,EAAKgG,kBAAkB3F,KAAvBC,QAAAN,KAEzBA,EAAKoD,MAAQ,CACXxC,MAAO,GACPwD,SAAU,KACViB,QAAS,IARMrF,sCAYnBiG,6BACE9F,KAAKoF,iBAGPS,2BAAkBpF,GAAO,IAAAsF,EAAA/F,KACvBA,KAAKiF,SAAS,CACZxE,SACC,WACDsF,EAAKjC,eAwDTtD,kBAAS,IACCC,EAAUT,KAAKiD,MAAfxC,MAEFuF,EAAgBhG,KAAKiD,MAAMiC,QAAQZ,IAAI,SAACC,GAAM,IAC1CrC,EAAOqC,EAAPrC,GAER,OACExB,EAAAC,EAAAC,cAAA,MAAI0C,UAAU,kBAAkB2C,IAAK/D,GACnCxB,EAAAC,EAAAC,cAACsF,EAAD,CAAc1E,YAAa+C,EAAG0B,IAAK/D,OAKzC,OACExB,EAAAC,EAAAC,cAACuF,EAAA,EAAD,KACEzF,EAAAC,EAAAC,cAAA,OAAK0C,UAAU,aACb5C,EAAAC,EAAAC,cAAA,OAAK0C,UAAU,OACb5C,EAAAC,EAAAC,cAAA,OAAK0C,UAAU,OACb5C,EAAAC,EAAAC,cAACwF,EAAD,CACE3F,MAAOA,EACPJ,cAAeL,KAAK6F,oBAEtBnF,EAAAC,EAAAC,cAAA,OAAK0C,UAAU,QACb5C,EAAAC,EAAAC,cAAA,OAAK0C,UAAU,eAAf,gBACA5C,EAAAC,EAAAC,cAAA,MAAI0C,UAAU,+BACV0C,YAtGI3E,aAiHTwC","file":"component---src-pages-index-jsx-bfb7c35719e22d8d6a15.js","sourcesContent":["import React, { Component } from 'react';\n\nimport Form from 'react-bootstrap/lib/Form'\n\nclass SearchForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(e) {\n    this.props.onQueryChange(e.target.value);\n  }\n\n  render() {\n    let { query } = this.props;\n\n    return (\n      <Form>\n        <Form.Group>\n          <Form.Label srOnly={true}>Filter</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Refine results\"\n            value={query}\n            onChange={this.handleChange}\n          />\n        </Form.Group>\n      </Form>\n    );\n  }\n}\n\nexport default SearchForm;\n","import * as PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { Link } from 'gatsby';\n\nclass SearchResult extends Component {\n  static propTypes = {\n    transmitter: PropTypes.shape({\n      antennaHeight: PropTypes.string,\n      areaServed: PropTypes.string,\n      state: PropTypes.string,\n      band: PropTypes.string,\n      frequency: PropTypes.string,\n      onAirID: PropTypes.string,\n      callsign: PropTypes.string,\n      latitude: PropTypes.number,\n      longitude: PropTypes.number,\n    }).isRequired,\n  }\n\n  render() {\n    const {\n      antennaHeight,\n      antennaPattern,\n      areaServed,\n      bSL,\n      band,\n      callsign,\n      distance,\n      easting,\n      frequency,\n      hoursofOperation,\n      id,\n      latitude,\n      licenceArea,\n      licenceAreaID,\n      licenceNumber,\n      longitude,\n      maximumCMF,\n      maximumERP,\n      northing,\n      onAirID,\n      polarisation,\n      purpose,\n      siteId,\n      siteName,\n      state,\n      status,\n      technicalSpecificationNumber,\n      transmitterPower,\n      zone,\n    } = this.props.transmitter;\n\n    return (\n      <div className=\"transmitter\">\n        <Link to={`/transmitters/${id}`}>\n          <h5>\n            {callsign}\n            {' '}\n            {frequency}\n            {band}\n          </h5>\n          <p>\n            { siteName }\n,\n            {' '}\n            { areaServed }\n,\n            {' '}\n            { state }\n          </p>\n          <p>\nDistance:\n            { distance.toFixed(2) }\nkm\n          </p>\n          <p>\n            <span className=\"badge badge-primary\">{ purpose }</span>\n          </p>\n        </Link>\n      </div>\n    );\n  }\n}\n\nexport default SearchResult;\n","import React, { Component } from 'react';\nimport geodist from 'geodist';\n\nimport Layout from '../components/layout';\nimport SearchForm from '../components/Search/SearchForm';\nimport SearchResult from '../components/Search/SearchResult';\n\nimport transmitterListing from '../data/acma/transmitter_listing_20110702.json';\n\nclass IndexPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleQueryChange = this.handleQueryChange.bind(this);\n\n    this.state = {\n      query: '',\n      position: null,\n      results: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getLocation();\n  }\n\n  handleQueryChange(query) {\n    this.setState({\n      query,\n    }, () => {\n      this.getInfo();\n    });\n  }\n\n  getInfo = () => {\n    const latlng = {\n      lat: this.state.position.coords.latitude,\n      lng: this.state.position.coords.longitude,\n    };\n\n    let transmitterListingSorted = transmitterListing.map((t) => {\n      t.distance = geodist(\n        latlng,\n        { lat: t.latitude, lng: t.longitude },\n        { exact: true, unit: 'km' },\n      );\n      return t;\n    });\n    transmitterListingSorted = transmitterListingSorted.sort((a, b) => a.distance - b.distance);\n\n    if (this.state.query.length > 1) {\n      transmitterListingSorted = transmitterListingSorted.filter((t) => {\n        if (t.callsign === null) {\n          return false;\n        }\n        return t.callsign.match(new RegExp(this.state.query, 'i')) !== null;\n      });\n    }\n\n    this.setState({ results: transmitterListingSorted.slice(0, 100) });\n  }\n\n  getLocation = () => {\n    const geolocation = navigator.geolocation;\n\n    const location = new Promise((resolve, reject) => {\n      if (!geolocation) {\n        reject(new Error('Not Supported'));\n      }\n\n      geolocation.getCurrentPosition((position) => {\n        resolve(position);\n      }, () => {\n        reject(new Error('Permission denied'));\n      });\n    });\n\n    location.then((position) => {\n      this.setState({\n        position,\n      }, () => {\n        this.getInfo();\n      });\n    });\n  }\n\n  render() {\n    const { query } = this.state;\n\n    const searchResults = this.state.results.map((t) => {\n      const { id } = t;\n\n      return (\n        <li className=\"list-group-item\" key={id}>\n          <SearchResult transmitter={t} key={id} />\n        </li>\n      );\n    });\n\n    return (\n      <Layout>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col\">\n              <SearchForm\n                query={query}\n                onQueryChange={this.handleQueryChange}\n              />\n              <div className=\"card\">\n                <div className=\"card-header\">Transmitters</div>\n                <ul className=\"list-group list-group-flush\">\n                  { searchResults }\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n}\n\nexport default IndexPage;\n"],"sourceRoot":""}