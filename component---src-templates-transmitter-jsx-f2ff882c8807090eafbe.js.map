{"version":3,"sources":["webpack:///./src/components/ElevationProfile/index.jsx","webpack:///./src/templates/transmitter.jsx"],"names":["ElevationProfile","props","_this","_Component","call","this","state","elevationProfile","scriptElement","onScriptLoad","bind","assertThisInitialized_default","componentDidMount","window","google","s","document","createElement","type","src","x","getElementsByTagName","parentNode","insertBefore","setState","addEventListener","componentWillUnmount","removeEventListener","_this2","_this$props","location1","location2","path","lat","latitude","lng","longitude","elevationService","maps","ElevationService","elevationRequest","samples","Promise","resolve","reject","Error","getElevationAlongPath","results","then","render","elevationProfileHeight","map","el","parseFloat","elevation","toFixed","data","labels","Array","datasets","borderColor","borderWidth","radius","label","fill","lineTension","react_default","a","className","style","marginTop","es","options","legend","display","xAxes","gridLines","show","yAxes","height","Component","propTypes","PropTypes","shape","isRequired","mapStyles","fullscreenControl","TransmitterPage","getLocation","geolocation","navigator","getCurrentPosition","position","transmitterLat","transmitter","transmitterLng","positionLat","coords","positionLng","distance","geodist","exact","unit","positionAcquired","transmitterListing20110702Json","_this$state","gmapPosition","components_ElevationProfile","_this$state$transmitt","antennaHeight","antennaPattern","areaServed","band","bSL","callsign","frequency","easting","hoursofOperation","id","licenceArea","licenceNumber","licenceAreaID","maximumCMF","maximumERP","polarisation","northing","onAirID","purpose","siteName","siteId","transmitterPower","status","technicalSpecificationNumber","zone","layout","href","dist","zoom","initialCenter","GoogleApiWrapper","apiKey","query"],"mappings":"yNAMMA,cAMJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OACjBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MAEKC,MAAQ,CACXC,iBAAkB,GAClBC,cAAe,MAGjBN,EAAKO,aAAeP,EAAKO,aAAaC,KAAlBC,QAAAT,KARHA,sCAWnBU,6BACE,GAAKC,OAAOC,OAWVT,KAAKI,mBAXa,CAClB,IAAMM,EAAIC,SAASC,cAAc,UACjCF,EAAEG,KAAO,kBACTH,EAAEI,IAAF,kFACA,IAAMC,EAAIJ,SAASK,qBAAqB,UAAU,GAClDD,EAAEE,WAAWC,aAAaR,EAAGK,GAC7Bf,KAAKmB,SAAS,CAAEhB,cAAeO,IAG/BA,EAAEU,iBAAiB,OAAQpB,KAAKI,oBAMpCiB,gCAAuB,IACblB,EAAkBH,KAAKC,MAAvBE,cACc,OAAlBA,GACFA,EAAcmB,oBAAoB,OAAQtB,KAAKI,iBAInDA,wBAAe,IAAAmB,EAAAvB,KAAAwB,EAEoBxB,KAAKJ,MAA9B6B,EAFKD,EAELC,UAAWC,EAFNF,EAEME,UACbC,EAAO,CACX,CACEC,IAAKH,EAAUI,SACfC,IAAKL,EAAUM,WAEjB,CACEH,IAAKF,EAAUG,SACfC,IAAKJ,EAAUK,YAIbC,EAAmB,IAAIxB,OAAOC,OAAOwB,KAAKC,iBAC1CC,EAAmB,CACvBR,OACAS,QAAS,KAGQ,IAAIC,QAAQ,SAACC,EAASC,GAClCP,GACHO,EAAO,IAAIC,MAAM,mCAGnBR,EAAiBS,sBAAsBN,EAAkB,SAACO,GACxDJ,EAAQI,IACP,WACDH,EAAO,IAAIC,MAAM,0BAIVG,KAAK,SAACD,GACfnB,EAAKJ,SAAS,CACZjB,iBAAkBwC,SAKxBE,kBAAS,IAEDC,EADuB7C,KAAKC,MAA1BC,iBACwC4C,IAAI,SAAAC,GAAE,OAAIC,WAAWD,EAAGE,UAAUC,QAAQ,MAEpFC,EAAO,CACXC,OAAQ,IAAIC,MAAM,KAClBC,SAAU,CAAC,CACTC,YAAa,UACbC,YAAa,EACbC,OAAQ,EACRC,MAAO,oBACPC,MAAM,EACNC,YAAa,EACbT,KAAMN,KA4BV,OACEgB,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,oBAAoBC,MAAO,CAAEC,UAAS,SACnDJ,EAAAC,EAAAlD,cAACsD,EAAA,EAAD,CAAMf,KAAMA,EAAMgB,QA1BN,CACdC,OAAQ,CACNC,SAAS,GAEXC,MAAO,CAAC,CACND,SAAS,EACTE,UAAW,CACTF,SAAS,GAEXjB,OAAQ,CACNoB,MAAM,KAGVC,MAAO,CAAC,CACNJ,SAAS,EACTE,UAAW,CACTF,SAAS,GAEXjB,OAAQ,CACNoB,MAAM,MAO4BE,OAAQ,WA1HrBC,aAAzBhF,EACGiF,UAAY,CACjBnD,UAAWoD,IAAUC,MAAMC,WAC3BrD,UAAWmD,IAAUC,MAAMC,YA6HhBpF,4CC7Hf,IAAMqF,EAAY,CAChBC,mBAAmB,GAGfC,cAQJ,SAAAA,EAAYtF,GAAO,IAAAC,GACjBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MAyBFmF,YAAc,WAAM,IACVC,EAAgBC,UAAhBD,YAES,IAAI/C,QAAQ,SAACC,EAASC,GAChC6C,GACH7C,EAAO,IAAIC,MAAM,kBAGnB4C,EAAYE,mBAAmB,SAACC,GAC9BjD,EAAQiD,IACP,WACDhD,EAAO,IAAIC,MAAM,0BAIZG,KAAK,SAAC4C,GACb,IAAMC,EAAiB3F,EAAKI,MAAMwF,YAAY5D,SACxC6D,EAAiB7F,EAAKI,MAAMwF,YAAY1D,UACxC4D,EAAcJ,EAASK,OAAO/D,SAC9BgE,EAAcN,EAASK,OAAO7D,UAE9B+D,EAAWC,IACf,CAAEnE,IAAK+D,EAAa7D,IAAK+D,GACzB,CAAEjE,IAAK4D,EAAgB1D,IAAK4D,GAC5B,CAAEM,OAAO,EAAMC,KAAM,OAGvBpG,EAAKsB,SAAS,CACZ2E,SAAUA,EAAS5C,QAAQ,GAC3BgD,kBAAkB,EAClBX,gBArDJ,IAAME,EAAc7F,EAAMuD,KAAKgD,+BAHd,OAKjBtG,EAAKI,MAAQ,CACX6F,SAAU,EACVI,kBAAkB,EAClBX,SAAU,CACRK,OAAQ,CACN/D,SAAU4D,EAAY5D,SACtBE,UAAW0D,EAAY1D,YAG3B0D,eAde5F,sCAkBnBU,6BACEP,KAAKmF,iBAGP9D,oCAuCAuB,kBAAS,IAAAwD,EACgCpG,KAAKC,MAApC6F,EADDM,EACCN,SAAUI,EADXE,EACWF,iBACVzF,EAAWT,KAAKJ,MAAhBa,OAEF4F,EAAe,CACnBzE,IAAK5B,KAAKC,MAAMsF,SAASK,OAAO/D,SAChCC,IAAK9B,KAAKC,MAAMsF,SAASK,OAAO7D,WAG5BN,EAAY,CAChBI,SAAU7B,KAAKC,MAAMsF,SAASK,OAAO/D,SACrCE,UAAW/B,KAAKC,MAAMsF,SAASK,OAAO7D,WAGlCL,EAAY,CAChBG,SAAU7B,KAAKC,MAAMwF,YAAY5D,SACjCE,UAAW/B,KAAKC,MAAMwF,YAAY1D,WAGhC7B,EAAmB,KAEpBgG,IACDhG,EAAmB2D,EAAAC,EAAAlD,cAAC0F,EAAD,CAAkB7E,UAAWA,EAAWC,UAAWA,KAtBjE,IAAA6E,EAsDHvG,KAAKC,MAAMwF,YA5Bbe,EA1BKD,EA0BLC,cACAC,EA3BKF,EA2BLE,eACAC,EA5BKH,EA4BLG,WAEAC,GA9BKJ,EA6BLK,IA7BKL,EA8BLI,MACAE,EA/BKN,EA+BLM,SAEAC,GAjCKP,EAgCLQ,QAhCKR,EAiCLO,WACAE,EAlCKT,EAkCLS,iBAEAnF,GApCK0E,EAmCLU,GAnCKV,EAoCL1E,UACAqF,EArCKX,EAqCLW,YAEAC,GAvCKZ,EAsCLa,cAtCKb,EAuCLY,eACApF,EAxCKwE,EAwCLxE,UACAsF,EAzCKd,EAyCLc,WACAC,EA1CKf,EA0CLe,WAGAC,GA7CKhB,EA2CLiB,SA3CKjB,EA4CLkB,QA5CKlB,EA6CLgB,cACAG,EA9CKnB,EA8CLmB,QAEAC,GAhDKpB,EA+CLqB,OA/CKrB,EAgDLoB,UACA1H,EAjDKsG,EAiDLtG,MAGA4H,GApDKtB,EAkDLuB,OAlDKvB,EAmDLwB,6BAnDKxB,EAoDLsB,kBApDKtB,EAqDLyB,KAGF,OACEnE,EAAAC,EAAAlD,cAACqH,EAAA,EAAD,KACEpE,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,aACbF,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,OACbF,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,OACbF,EAAAC,EAAAlD,cAAA,UACIiG,EACD,IACCC,EACAH,KAIR9C,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,OACbF,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,OACbF,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,QACbF,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,eAAf,gBACAF,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,+BACZF,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBAAoB4D,GAClC9D,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBAAoBiD,GAClCnD,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBACV+B,EADJ,WAIAjC,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBACZF,EAAAC,EAAAlD,cAAA,KAAGsH,KAAI,oCAAsCrG,EAAtC,IAAkDE,GACrDF,EADJ,IAGG,IACCE,IAGN8B,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBACZF,EAAAC,EAAAlD,cAAA,QAAMmD,UAAU,uBAAwB2D,IAE1C7D,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBAAoB2C,GAClC7C,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBAAoBmD,GAClCrD,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBAAoB9D,GAClC4D,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBAAd,UAEIoD,MAKVtD,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,OACbF,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,QACbF,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,eAAf,uBACAF,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,+BACZF,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBACVyC,EADJ,UAIA3C,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBAAoB0C,GAClC5C,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBAAoB8D,GAClChE,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBAAoBsD,GAClCxD,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBAAoBuD,GAClCzD,EAAAC,EAAAlD,cAAA,MAAImD,UAAU,mBAAoBwD,OAK1C1D,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,OACbF,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,OACbF,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,OAAOC,MAAO,CAAEU,OAAW,UACxCb,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,eAAf,qBACC7D,IAGL2D,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,OACbF,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,QACbF,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,eAAf,OACAF,EAAAC,EAAAlD,cAAA,OAAKmD,UAAU,kBAAkBC,MAAO,CAAEU,OAAW,UACnDb,EAAAC,EAAAlD,cAACuH,EAAA,IAAD,CACE1H,OAAQA,EACR2H,KAAM,GACNpE,MAAOgB,EACPqD,cAAehC,cA1ML1B,aAAxBO,EACGN,UAAY,CACjBzB,KAAM0B,IAAUC,MAAM,CACpBqB,+BAAgCtB,IAAUC,MAAMC,aAC/CA,WACHtE,OAAQoE,IAAUC,OAiNPwD,qCAAiB,CAC9BC,OAAQ,2CADKD,CAEZpD,GAFYoD,IAKFE,EAAK","file":"component---src-templates-transmitter-jsx-f2ff882c8807090eafbe.js","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Line } from 'react-chartjs-2';\n\nconst GOOGLE_API_KEY = 'AIzaSyAuUwqWGIlroxZGbQqWxccO4Nll24udLTg';\n\nclass ElevationProfile extends Component {\n  static propTypes = {\n    location1: PropTypes.shape.isRequired,\n    location2: PropTypes.shape.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      elevationProfile: [],\n      scriptElement: null,\n    };\n\n    this.onScriptLoad = this.onScriptLoad.bind(this);\n  }\n\n  componentDidMount() {\n    if (!window.google) {\n      const s = document.createElement('script');\n      s.type = 'text/javascript';\n      s.src = `https://maps.google.com/maps/api/js?key=${GOOGLE_API_KEY}`;\n      const x = document.getElementsByTagName('script')[0];\n      x.parentNode.insertBefore(s, x);\n      this.setState({ scriptElement: s });\n      // Below is important.\n      // We cannot access google.maps until it's finished loading\n      s.addEventListener('load', this.onScriptLoad());\n    } else {\n      this.onScriptLoad();\n    }\n  }\n\n  componentWillUnmount() {\n    const { scriptElement } = this.state;\n    if (scriptElement !== null) {\n      scriptElement.removeEventListener('load', this.onScriptLoad);\n    }\n  }\n\n  onScriptLoad() {\n    // Load up the elevation here\n    const { location1, location2 } = this.props;\n    const path = [\n      {\n        lat: location1.latitude,\n        lng: location1.longitude,\n      },\n      {\n        lat: location2.latitude,\n        lng: location2.longitude,\n      },\n    ];\n\n    const elevationService = new window.google.maps.ElevationService();\n    const elevationRequest = {\n      path,\n      samples: 256,\n    };\n\n    const elevations = new Promise((resolve, reject) => {\n      if (!elevationService) {\n        reject(new Error('ElevationService not supported'));\n      }\n\n      elevationService.getElevationAlongPath(elevationRequest, (results) => {\n        resolve(results);\n      }, () => {\n        reject(new Error('Permission denied'));\n      });\n    });\n\n    elevations.then((results) => {\n      this.setState({\n        elevationProfile: results,\n      });\n    });\n  }\n\n  render() {\n    const { elevationProfile } = this.state;\n    const elevationProfileHeight = elevationProfile.map(el => parseFloat(el.elevation.toFixed(2)));\n\n    const data = {\n      labels: new Array(256),\n      datasets: [{\n        borderColor: '#673ab7',\n        borderWidth: 1,\n        radius: 0,\n        label: 'Elevation Profile',\n        fill: false,\n        lineTension: 0,\n        data: elevationProfileHeight,\n      }],\n    };\n\n    const options = {\n      legend: {\n        display: false,\n      },\n      xAxes: [{\n        display: false,\n        gridLines: {\n          display: false,\n        },\n        labels: {\n          show: false,\n        },\n      }],\n      yAxes: [{\n        display: false,\n        gridLines: {\n          display: false,\n        },\n        labels: {\n          show: false,\n        },\n      }],\n    };\n\n    return (\n      <div className=\"elevation-profile\" style={{ marginTop: `20px` }}>\n        <Line data={data} options={options} height={100} />\n      </div>\n    );\n  }\n}\n\nexport default ElevationProfile;\n","import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { graphql } from 'gatsby';\nimport { GoogleApiWrapper, Map } from 'google-maps-react';\nimport geodist from 'geodist';\n\nimport Layout from '../components/layout';\nimport ElevationProfile from '../components/ElevationProfile';\n\nconst mapStyles = {\n  fullscreenControl: false,\n};\n\nclass TransmitterPage extends Component {\n  static propTypes = {\n    data: PropTypes.shape({\n      transmitterListing20110702Json: PropTypes.shape.isRequired,\n    }).isRequired,\n    google: PropTypes.shape,\n  };\n\n  constructor(props) {\n    super(props);\n\n    const transmitter = props.data.transmitterListing20110702Json;\n\n    this.state = {\n      distance: 0.0,\n      positionAcquired: false,\n      position: {\n        coords: {\n          latitude: transmitter.latitude,\n          longitude: transmitter.longitude,\n        },\n      },\n      transmitter,\n    };\n  }\n\n  componentDidMount() {\n    this.getLocation();\n  }\n\n  componentWillUnmount() {\n\n  }\n\n  getLocation = () => {\n    const { geolocation } = navigator;\n\n    const location = new Promise((resolve, reject) => {\n      if (!geolocation) {\n        reject(new Error('Not Supported'));\n      }\n\n      geolocation.getCurrentPosition((position) => {\n        resolve(position);\n      }, () => {\n        reject(new Error('Permission denied'));\n      });\n    });\n\n    location.then((position) => {\n      const transmitterLat = this.state.transmitter.latitude;\n      const transmitterLng = this.state.transmitter.longitude;\n      const positionLat = position.coords.latitude;\n      const positionLng = position.coords.longitude;\n\n      const distance = geodist(\n        { lat: positionLat, lng: positionLng },\n        { lat: transmitterLat, lng: transmitterLng },\n        { exact: true, unit: 'km' },\n      );\n\n      this.setState({\n        distance: distance.toFixed(2),\n        positionAcquired: true,\n        position,\n      });\n    });\n  }\n\n  render() {\n    const { distance, positionAcquired } = this.state;\n    const { google } = this.props;\n\n    const gmapPosition = {\n      lat: this.state.position.coords.latitude,\n      lng: this.state.position.coords.longitude,\n    };\n\n    const location1 = {\n      latitude: this.state.position.coords.latitude,\n      longitude: this.state.position.coords.longitude,\n    };\n\n    const location2 = {\n      latitude: this.state.transmitter.latitude,\n      longitude: this.state.transmitter.longitude,\n    };\n\n    let elevationProfile = null;\n\n    if(positionAcquired) {\n      elevationProfile = <ElevationProfile location1={location1} location2={location2} />;\n    }\n\n    const {\n      antennaHeight,\n      antennaPattern,\n      areaServed,\n      bSL,\n      band,\n      callsign,\n      easting,\n      frequency,\n      hoursofOperation,\n      id,\n      latitude,\n      licenceArea,\n      licenceAreaID,\n      licenceNumber,\n      longitude,\n      maximumCMF,\n      maximumERP,\n      northing,\n      onAirID,\n      polarisation,\n      purpose,\n      siteId,\n      siteName,\n      state,\n      status,\n      technicalSpecificationNumber,\n      transmitterPower,\n      zone,\n    } = this.state.transmitter;\n\n    return (\n      <Layout>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col\">\n              <h1>\n                { callsign }\n                {' '}\n                { frequency }\n                { band }\n              </h1>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col\">\n              <div className=\"card\">\n                <div className=\"card-header\">Site Details</div>\n                <ul className=\"list-group list-group-flush\">\n                  <li className=\"list-group-item\">{ siteName }</li>\n                  <li className=\"list-group-item\">{ hoursofOperation }</li>\n                  <li className=\"list-group-item\">\n                    { distance }\nkm away\n                  </li>\n                  <li className=\"list-group-item\">\n                    <a href={`http://maps.google.com.au/maps?q=${latitude},${longitude}`}>\n                      { latitude }\n,\n                      {' '}\n                      { longitude }\n                    </a>\n                  </li>\n                  <li className=\"list-group-item\">\n                    <span className=\"badge badge-primary\">{ purpose }</span>\n                  </li>\n                  <li className=\"list-group-item\">{ areaServed }</li>\n                  <li className=\"list-group-item\">{ licenceArea }</li>\n                  <li className=\"list-group-item\">{ state }</li>\n                  <li className=\"list-group-item\">\nLicense\n                    { licenceNumber }\n                  </li>\n                </ul>\n              </div>\n            </div>\n            <div className=\"col\">\n              <div className=\"card\">\n                <div className=\"card-header\">Transmitter Details</div>\n                <ul className=\"list-group list-group-flush\">\n                  <li className=\"list-group-item\">\n                    { antennaHeight }\nm high\n                  </li>\n                  <li className=\"list-group-item\">{ antennaPattern }</li>\n                  <li className=\"list-group-item\">{ transmitterPower }</li>\n                  <li className=\"list-group-item\">{ maximumCMF }</li>\n                  <li className=\"list-group-item\">{ maximumERP }</li>\n                  <li className=\"list-group-item\">{ polarisation }</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col\">\n              <div className=\"card\" style={{ height: `${200}px` }}>\n                <div className=\"card-header\">Elevation Profile</div>\n                {elevationProfile}\n              </div>\n            </div>\n            <div className=\"col\">\n              <div className=\"card\">\n                <div className=\"card-header\">Map</div>\n                <div className=\"card-img-bottom\" style={{ height: `${200}px` }}>\n                  <Map\n                    google={google}\n                    zoom={10}\n                    style={mapStyles}\n                    initialCenter={gmapPosition}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n}\n\nexport default GoogleApiWrapper({\n  apiKey: 'AIzaSyAuUwqWGIlroxZGbQqWxccO4Nll24udLTg',\n})(TransmitterPage);\n\n// export default TransmitterPage\nexport const query = graphql`\n  query TransmitterDetails($transmitterID: String!) {\n    transmitterListing20110702Json(id: { eq: $transmitterID }) {\n      antennaHeight\n      antennaPattern\n      areaServed\n      bSL\n      band\n      callsign\n      easting\n      frequency\n      hoursofOperation\n      id\n      latitude\n      licenceArea\n      licenceAreaID\n      licenceNumber\n      longitude\n      maximumCMF\n      maximumERP\n      northing\n      onAirID\n      polarisation\n      purpose\n      siteId\n      siteName\n      state\n      status\n      technicalSpecificationNumber\n      transmitterPower\n      zone\n    }\n  }\n`;\n"],"sourceRoot":""}