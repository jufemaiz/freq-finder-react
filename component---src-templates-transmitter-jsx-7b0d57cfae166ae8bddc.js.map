{"version":3,"sources":["webpack:///./src/components/ElevationProfile/index.jsx","webpack:///./src/templates/transmitter.jsx"],"names":["ElevationProfile","props","_this","_Component","call","this","state","elevationProfile","scriptElement","onScriptLoad","bind","assertThisInitialized_default","componentDidMount","window","google","s","document","createElement","type","src","x","getElementsByTagName","parentNode","insertBefore","setState","addEventListener","componentWillUnmount","removeEventListener","_this2","_this$props","location1","location2","path","lat","latitude","lng","longitude","elevationService","maps","ElevationService","elevationRequest","samples","Promise","resolve","reject","Error","getElevationAlongPath","results","then","render","elevationProfileHeight","map","el","parseFloat","elevation","toFixed","data","labels","Array","datasets","borderColor","borderWidth","radius","label","fill","lineTension","react_default","a","className","style","marginTop","es","options","legend","display","xAxes","gridLines","show","yAxes","height","Component","propTypes","PropTypes","shape","isRequired","TransmitterPage","getLocation","geolocation","navigator","getCurrentPosition","position","distance","geodist","coords","transmitter","exact","unit","positionAcquired","transmitterListing20110702Json","key","_this$state","gmapPosition","components_ElevationProfile","_this$state$transmitt","antennaHeight","antennaPattern","areaServed","band","bSL","callsign","frequency","easting","hoursofOperation","id","licenceArea","licenceNumber","licenceAreaID","maximumCMF","maximumERP","polarisation","northing","onAirID","purpose","siteName","siteId","transmitterPower","status","technicalSpecificationNumber","zone","layout","href","dist","zoom","initialCenter","query","GoogleApiWrapper","apiKey"],"mappings":"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","file":"component---src-templates-transmitter-jsx-7b0d57cfae166ae8bddc.js","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Line } from 'react-chartjs-2';\n\nconst GOOGLE_API_KEY = 'AIzaSyAuUwqWGIlroxZGbQqWxccO4Nll24udLTg';\n\nclass ElevationProfile extends Component {\n  static propTypes = {\n    location1: PropTypes.shape.isRequired,\n    location2: PropTypes.shape.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      elevationProfile: [],\n      scriptElement: null,\n    };\n\n    this.onScriptLoad = this.onScriptLoad.bind(this);\n  }\n\n  componentDidMount() {\n    if (!window.google) {\n      const s = document.createElement('script');\n      s.type = 'text/javascript';\n      s.src = `https://maps.google.com/maps/api/js?key=${GOOGLE_API_KEY}`;\n      const x = document.getElementsByTagName('script')[0];\n      x.parentNode.insertBefore(s, x);\n      this.setState({ scriptElement: s });\n      // Below is important.\n      // We cannot access google.maps until it's finished loading\n      s.addEventListener('load', this.onScriptLoad());\n    } else {\n      this.onScriptLoad();\n    }\n  }\n\n  componentWillUnmount() {\n    const { scriptElement } = this.state;\n    if (scriptElement !== null) {\n      scriptElement.removeEventListener('load', this.onScriptLoad);\n    }\n  }\n\n  onScriptLoad() {\n    // Load up the elevation here\n    const { location1, location2 } = this.props;\n    const path = [\n      {\n        lat: location1.latitude,\n        lng: location1.longitude,\n      },\n      {\n        lat: location2.latitude,\n        lng: location2.longitude,\n      },\n    ];\n\n    const elevationService = new window.google.maps.ElevationService();\n    const elevationRequest = {\n      path,\n      samples: 256,\n    };\n\n    const elevations = new Promise((resolve, reject) => {\n      if (!elevationService) {\n        reject(new Error('ElevationService not supported'));\n      }\n\n      elevationService.getElevationAlongPath(elevationRequest, (results) => {\n        resolve(results);\n      }, () => {\n        reject(new Error('Permission denied'));\n      });\n    });\n\n    elevations.then((results) => {\n      this.setState({\n        elevationProfile: results,\n      });\n    });\n  }\n\n  render() {\n    const { elevationProfile } = this.state;\n    const elevationProfileHeight = elevationProfile.map(el => parseFloat(el.elevation.toFixed(2)));\n\n    const data = {\n      labels: new Array(256),\n      datasets: [{\n        borderColor: '#673ab7',\n        borderWidth: 1,\n        radius: 0,\n        label: 'Elevation Profile',\n        fill: false,\n        lineTension: 0,\n        data: elevationProfileHeight,\n      }],\n    };\n\n    const options = {\n      legend: {\n        display: false,\n      },\n      xAxes: [{\n        display: false,\n        gridLines: {\n          display: false,\n        },\n        labels: {\n          show: false,\n        },\n      }],\n      yAxes: [{\n        display: false,\n        gridLines: {\n          display: false,\n        },\n        labels: {\n          show: false,\n        },\n      }],\n    };\n\n    return (\n      <div className=\"elevation-profile\" style={{ marginTop: `20px` }}>\n        <Line data={data} options={options} height={100} />\n      </div>\n    );\n  }\n}\n\nexport default ElevationProfile;\n","import React, { Component } from 'react';\nimport { graphql, Link } from 'gatsby';\nimport { GoogleApiWrapper, Map } from 'google-maps-react';\nimport geodist from 'geodist';\n\nimport Layout from '../components/layout';\nimport ElevationProfile from '../components/ElevationProfile'\n\nimport transmitterListing from '../data/acma/transmitter_listing_20110702.json';\n\nconst mapStyles = {\n  fullscreenControl: false,\n};\n\nclass TransmitterPage extends Component {\n  constructor(props) {\n    super(props);\n\n    const transmitter = props.data.transmitterListing20110702Json;\n\n    this.state = {\n      distance: 0.0,\n      key: '',\n      positionAcquired: false,\n      position: {\n        coords: {\n          latitude: transmitter.latitude,\n          longitude: transmitter.longitude,\n        },\n      },\n      transmitter,\n    };\n  }\n\n  componentDidMount() {\n    this.getLocation();\n  }\n\n  componentWillUnmount() {\n\n  }\n\n  getLocation = () => {\n    const geolocation = navigator.geolocation;\n\n    const location = new Promise((resolve, reject) => {\n      if (!geolocation) {\n        reject(new Error('Not Supported'));\n      }\n\n      geolocation.getCurrentPosition((position) => {\n        resolve(position);\n      }, () => {\n        reject(new Error('Permission denied'));\n      });\n    });\n\n    location.then((position) => {\n      const distance = geodist(\n        { lat: position.coords.latitude, lng: position.coords.longitude },\n        { lat: this.state.transmitter.latitude, lng: this.state.transmitter.longitude },\n        { exact: true, unit: 'km' },\n      );\n\n      this.setState({\n        distance: distance.toFixed(2),\n        positionAcquired: true,\n        position,\n      });\n    });\n  }\n\n  render() {\n    const { distance, positionAcquired } = this.state;\n    const mapStyles = {};\n    const gmapPosition = {\n      lat: this.state.position.coords.latitude,\n      lng: this.state.position.coords.longitude,\n    };\n\n    const location1 = {\n      latitude: this.state.position.coords.latitude,\n      longitude: this.state.position.coords.longitude,\n    };\n\n    const location2 = {\n      latitude: this.state.transmitter.latitude,\n      longitude: this.state.transmitter.longitude,\n    };\n\n    let elevationProfile = null;\n\n    if(positionAcquired) {\n      elevationProfile = <ElevationProfile location1={location1} location2={location2} />;\n    }\n\n    const {\n      antennaHeight,\n      antennaPattern,\n      areaServed,\n      bSL,\n      band,\n      callsign,\n      easting,\n      frequency,\n      hoursofOperation,\n      id,\n      latitude,\n      licenceArea,\n      licenceAreaID,\n      licenceNumber,\n      longitude,\n      maximumCMF,\n      maximumERP,\n      northing,\n      onAirID,\n      polarisation,\n      purpose,\n      siteId,\n      siteName,\n      state,\n      status,\n      technicalSpecificationNumber,\n      transmitterPower,\n      zone,\n    } = this.state.transmitter;\n\n    return (\n      <Layout>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col\">\n              <h1>\n                { callsign }\n                {' '}\n                { frequency }\n                { band }\n              </h1>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col\">\n              <div className=\"card\">\n                <div className=\"card-header\">Site Details</div>\n                <ul className=\"list-group list-group-flush\">\n                  <li className=\"list-group-item\">{ siteName }</li>\n                  <li className=\"list-group-item\">{ hoursofOperation }</li>\n                  <li className=\"list-group-item\">\n                    { distance }\nkm away\n                  </li>\n                  <li className=\"list-group-item\">\n                    <a href={`http://maps.google.com.au/maps?q=${latitude},${longitude}`}>\n                      { latitude }\n,\n                      {' '}\n                      { longitude }\n                    </a>\n                  </li>\n                  <li className=\"list-group-item\">\n                    <span className=\"badge badge-primary\">{ purpose }</span>\n                  </li>\n                  <li className=\"list-group-item\">{ areaServed }</li>\n                  <li className=\"list-group-item\">{ licenceArea }</li>\n                  <li className=\"list-group-item\">{ state }</li>\n                  <li className=\"list-group-item\">\nLicense\n                    { licenceNumber }\n                  </li>\n                </ul>\n              </div>\n            </div>\n            <div className=\"col\">\n              <div className=\"card\">\n                <div className=\"card-header\">Transmitter Details</div>\n                <ul className=\"list-group list-group-flush\">\n                  <li className=\"list-group-item\">\n                    { antennaHeight }\nm high\n                  </li>\n                  <li className=\"list-group-item\">{ antennaPattern }</li>\n                  <li className=\"list-group-item\">{ transmitterPower }</li>\n                  <li className=\"list-group-item\">{ maximumCMF }</li>\n                  <li className=\"list-group-item\">{ maximumERP }</li>\n                  <li className=\"list-group-item\">{ polarisation }</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col\">\n              <div className=\"card\" style={{ height: `${200}px` }}>\n                {elevationProfile}\n              </div>\n            </div>\n            <div className=\"col\">\n              <div className=\"card\" style={{ height: `${200}px` }}>\n                <Map\n                  google={this.props.google}\n                  zoom={10}\n                  style={mapStyles}\n                  initialCenter={gmapPosition}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n}\n\nexport default GoogleApiWrapper({\n  apiKey: 'AIzaSyAuUwqWGIlroxZGbQqWxccO4Nll24udLTg',\n})(TransmitterPage);\n\n// export default TransmitterPage\nexport const query = graphql`\n  query TransmitterDetails($transmitterID: String!) {\n    transmitterListing20110702Json(id: { eq: $transmitterID }) {\n      antennaHeight\n      antennaPattern\n      areaServed\n      bSL\n      band\n      callsign\n      easting\n      frequency\n      hoursofOperation\n      id\n      latitude\n      licenceArea\n      licenceAreaID\n      licenceNumber\n      longitude\n      maximumCMF\n      maximumERP\n      northing\n      onAirID\n      polarisation\n      purpose\n      siteId\n      siteName\n      state\n      status\n      technicalSpecificationNumber\n      transmitterPower\n      zone\n    }\n  }\n`;\n"],"sourceRoot":""}